const e=require("react");function t(){return e.createElement("div",{style:{marginLeft:"50%",transform:"translate(-50%, 0)"}},e.createElement("svg",{style:{margin:"auto",display:"block",shapeRendering:"auto"},width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},e.createElement("circle",{cx:"50",cy:"50",r:"32",strokeDidth:"8",stroke:"#0a0a0a",strokeDasharray:"50.26548245743669 50.26548245743669",fill:"none",strokeLinecap:"round"},e.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:"1s",repeatCount:"indefinite",keyTimes:"0;1",values:"0 50 50;360 50 50"})),e.createElement("circle",{cx:"50",cy:"50",r:"23","stroke-width":"8",stroke:"#28292f",strokeDasharray:"36.12831551628262 36.12831551628262",strokeDashoffset:"36.12831551628262",fill:"none",strokeLinecap:"round"},e.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:"1s",repeatCount:"indefinite",keyTimes:"0;1",values:"0 50 50;-360 50 50"}))))}function n({src:n="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4",width:r=1200,height:o=720,fps:a=12,elements:s=[],customLoading:i}){const c=e.useRef(null),[l,m]=e.useState(!1),[d,u]=e.useState(0),[g,h]=e.useState([]),[f,p]=e.useState(!1),[w,E]=e.useState(0);return n?(e.useEffect((()=>{m(!0),function(e,t){return new Promise(((n,r)=>{const o=document.createElement("video");o.crossOrigin="anonymous",o.src=e,o.muted=!0,o.autoplay=!0;const a=[];o.onloadeddata=()=>{const e=document.createElement("canvas"),r=e.getContext("2d"),s=()=>{e.width=o.videoWidth,e.height=o.videoHeight,r.drawImage(o,0,0,e.width,e.height);const t=e.toDataURL("image/png");a.push(t),o.currentTime<o.duration?(o.currentTime+=1/o.framesPerSecond,setTimeout(s,0)):n(a)};o.framesPerSecond=t,s()},o.onerror=e=>{r(e)}}))}(n,a).then((e=>{h(e),m(!1),console.log("Frames extracted successfully:")})).catch((e=>{console.error("Error extracting frames:",e),m(!1)}))}),[]),e.useEffect((()=>{const e=c.current.getContext("2d"),t=new Image;t.src=g[0],t.onload=()=>{e.drawImage(t,0,0,r,o)}}),[g]),e.useEffect((()=>{const e=c.current,t=e.getContext("2d");let n;const a=()=>{const a=window.scrollY,s=e.getBoundingClientRect().top;w<e.getBoundingClientRect().top&&E(s);const i=100*g.length;if(Math.abs(a-d)>2){cancelAnimationFrame(n);const e=a-w>0&&s<50&&a<i;n=requestAnimationFrame((()=>{if(e){const e=new Image;e.src=g[Math.floor((a-w)/100)%g.length],e.onload=()=>{t.drawImage(e,0,0,r,o)}}u(a),p(e)}))}};return window.addEventListener("scroll",a),()=>{window.removeEventListener("scroll",a),cancelAnimationFrame(n)}}),[d]),l?i||e.createElement(t,null):e.createElement("div",{style:{height:100*g.length}},e.createElement("canvas",{style:{position:f?"fixed":"absolute",top:f?0:"auto",left:"50%",transform:"translate(-50%, 0)"},ref:c,width:r,height:o}),s.map((t=>e.createElement("div",{style:{width:"100%",position:"absolute",zIndex:999,top:t.position/100*(100*g.length)}},t.element))))):null}export{n as VideoScroller};
